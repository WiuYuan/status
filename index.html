<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <title>Status Test</title>
</head>
<body>
  <h1>Status Test</h1>
  <div id="question-container"></div>

  <script type="module">
    import { loadPyodide } from "https://cdn.jsdelivr.net/pyodide/v0.26.2/full/pyodide.mjs";

    async function main() {
      const pyodide = await loadPyodide();
      console.log("✅ Pyodide loaded");

      // 载入 Python 代码
      const statusScript = await (await fetch("status_test.py")).text();
      await pyodide.runPythonAsync(statusScript);

      // 载入 JSON 流程
      const flowJson = await (await fetch("flow.json")).text();
      pyodide.globals.set("flow_str", flowJson);

      // 启动测试
      await pyodide.runPythonAsync("run_status_test(flow_str)");
    }

    main();
  </script>
</body>
</html>